boot(256,256);

let t = 0;

let rot = 0;
let center = 4.5;

sprite('hello-world');

cls(palette[27]);

function update() {

  t += 1

  requestAnimationFrame(update);

  x = [
    0,1,2,3,4,5,6,7,8,9,
    0,1,2,3,4,5,6,7,8,9,
    0,1,2,3,4,5,6,7,8,9,
    0,1,2,3,4,5,6,7,8,9,
    0,1,2,3,4,5,6,7,8,9,
    0,1,2,3,4,5,6,7,8,9,
    0,1,2,3,4,5,6,7,8,9,
    0,1,2,3,4,5,6,7,8,9,
    0,1,2,3,4,5,6,7,8,9,
      1,2,3,4,5,6,7,8,9
  ];
   
  y = [
    0,0,0,0,0,0,0,0,0,0,
    1,1,1,1,1,1,1,1,1,1,
    2,2,2,2,2,2,2,2,2,2,
    3,3,3,3,3,3,3,3,3,3,
    4,4,4,4,4,4,4,4,4,4,
    5,5,5,5,5,5,5,5,5,5,
    6,6,6,6,6,6,6,6,6,6,
    7,7,7,7,7,7,7,7,7,7,
    8,8,8,8,8,8,8,8,8,8,
      9,9,9,9,9,9,9,9,9
  ];

  p = [
    31,31,31,31,31,31,31,31,31,31,
    31,25,26,26,24,24,24,24,25,31,
    31,31,26,26,24,24,24,24,31,31,
    31,30,26,26,24,24,24,24,30,31,
    31,25,26,26,24,24,24,24,25,31,
    31,25,25,25,25,25,25,25,25,31,
    31,25,25,28,28,28,28,26,25,31,
    31,25,25,27,26,27,27,26,25,31,
    31,31,25,27,26,27,27,26,25,31,
    31,31,31,31,31,31,31,31,31,31
  ];

  //cls(palette[27]);
  if (t%4 == 1) {
    cls(palette[27]);
  }

  //image
  for (let i = 0; i < p.length ; i++) {

    cx = x[i];

    cy = y[i];

    rot = Math.sin(t/10)*30;

    [nx,ny] = rotate(center,center,cx,cy,rot);

    color = palette[p[i]];

    rectfill(nx*8+88,ny*8+88,12,12,color);

  }

  tx = Math.sin(t/40)*64*rnd(2);
  ty = Math.sin(t/40)*Math.cos(t/40)*64*rnd(2);

  sspr(128-18+tx,128-18+ty,18*2,18*2,0,0,18,18);

  ctx.shadowColor = palette[(t%32)];
  ctx.shadowOffsetY = Math.sin(t/8)*64*rnd(2);
  ctx.shadowOffsetX = Math.cos(t/8)*64*rnd(2);
}

update()
